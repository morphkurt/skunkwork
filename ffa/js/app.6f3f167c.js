(function(t){function e(e){for(var r,i,c=e[0],s=e[1],l=e[2],f=0,d=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,c=1;c<a.length;c++){var s=a[c];0!==n[s]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},n={app:0},o=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/ffa/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0a90":function(t,e,a){"use strict";a("e9c9")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Main",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container max-w-4xl my-10"},[a("div",{staticClass:"bg-white rounded px-1 pt-6 pb-8 mb-4"},[a("h1",{staticClass:"text-xl text-center pb-3"},[t._v(t._s(t.title))]),a("div",{staticClass:"flex-col"},[a("div",{staticClass:"flex flex-row"},[a("div",{staticClass:"w-5/6"},[a("video",{ref:"videoPlayer",attrs:{id:"video",crossorigin:"anonymous"},on:{timeupdate:function(e){return t.onTimeUpdate(e)},loadedmetadata:function(e){return t.onLoadedMetadata(e)}}})]),a("div",{staticClass:"flex flex-no-wrap flex-col w-1/6 ml-3 border-gray-200 border-1"},t._l(t.keyEvents,(function(e,r){return a("div",{key:r,staticClass:"moment",on:{click:function(a){t.player.currentTime=e.videoTime}}},[a("span",{staticClass:"inline-block"},[t._v(t._s(e.friendly_name))]),e.teamLogo?a("img",{staticClass:"inline-block",attrs:{src:e.teamLogo,width:"20"}}):t._e()])})),0)]),t._m(0),a("div",{staticClass:"text-xs mt-3 whitespace-pre"},[a("ul",{staticClass:"flex"},[a("li",{staticClass:"flex-1 mr-2"},[a("a",{staticClass:"text-center block border border-blue-500 rounded py-2 px-4 bg-blue-500 hover:bg-blue-700 text-white",attrs:{href:"#"},on:{click:function(e){t.ActiveCalibrate=!0,t.ActiveWebVTT=!1,t.calibrate()}}},[t._v("Calibrate")])]),a("li",{staticClass:"flex-1 mr-2"},[a("a",{staticClass:"text-center block border border-blue-500 rounded py-2 px-4 bg-blue-500 hover:bg-blue-700 text-white",attrs:{href:"#"},on:{click:function(e){t.ActiveCalibrate=!1,t.ActiveWebVTT=!0}}},[t._v("WebVTT")])])])]),t.ActiveWebVTT?a("div",{staticClass:"overflow-x-scroll text-xs mt-3 whitespace-pre"},[a("p",[t._v(t._s(t.webvtt))])]):t._e(),t.ActiveCalibrate?a("div",{staticClass:"text-xs mt-3 whitespace-pre"},[a("table",{staticClass:"table-auto object-center"},[t._m(1),a("tbody",t._l(t.calbrateData,(function(e,r){return a("tr",{key:r,on:{click:function(a){t.player.currentTime=e.time}}},[a("td",{staticClass:"border px-4 py-2"},[t._v(t._s(r))]),a("td",{staticClass:"border px-4 py-2"},[t._v(t._s(e.matchtime))]),a("td",{staticClass:"border px-4 py-2"},[t._v(t._s(e.time))]),a("td",{staticClass:"border px-4 py-2"},[t._v(" "+t._s(Math.floor(e.matchtime/60)+":"+e.matchtime%60)+" ")]),a("td",{staticClass:"border px-4 py-2"},[t._v(" "+t._s(Math.floor(e.time/60)+":"+e.time%60)+" ")]),a("td",{staticClass:"border px-4 py-2"},[t._v(" "+t._s(e.matchtime-e.time)+" ")]),a("td",{staticClass:"border px-4 py-2"},[t._v(" "+t._s(e.half)+" ")])])})),0)])]):t._e()])])])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("canvas",{staticClass:"hidden",attrs:{id:"canvas"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"px-4 py-2"},[t._v("Sample")]),a("th",{staticClass:"px-4 py-2"},[t._v("Match Time (s)")]),a("th",{staticClass:"px-4 py-2"},[t._v("Video Time (s)")]),a("th",{staticClass:"px-4 py-2"},[t._v("Match Time")]),a("th",{staticClass:"px-4 py-2"},[t._v("Video Time")]),a("th",{staticClass:"px-4 py-2"},[t._v("Offset")]),a("th",{staticClass:"px-4 py-2"},[t._v("Half")])])])}],s=(a("4de4"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("3ca3"),a("4d90"),a("841c"),a("1276"),a("2ca0"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),l=a("4fb8"),u=a.n(l),f=a("446e"),d=a.n(f),p=a("6909"),h=a.n(p),v={name:"VideoPlayer",props:{videoOptions:{type:Object,default:function(){return{}}}},data:function(){return{displayTime:"00:00:00",playState:!0,isFullscreen:!1,progress:"height: 10px;width: 0%",ActiveWebVTT:!1,calbrateData:[],ActiveCalibrate:!1,bcData:{},video:null,webvtt:"",matchOffsetData:null,canvas:null,ctx:null,keyEvents:[],title:null,matchInfo:{},matchId:null,currentTime:0,matchData:{},player:null,options:{autoplay:!1,controls:!1},playerKey:"BCpkADawqM2QQRAICfpf23j4hDi7g-UlKZp6rNqo3jReJFEfkuhnjOfjJTUOryo27EoXjggPUBbgzBpPvNY7p-YM4Me1Sx3Khpn-FkMQqP5x66s_ULssIqU3V6C2s7odORMP7L_iAyuGwexk"}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new URLSearchParams(window.location.search),window.muxjs=h.a,t.canvas=document.getElementById("canvas"),t.video=document.getElementById("video"),t.ctx=t.canvas.getContext("2d"),e.next=7,t.getBC(a.get("videoId"));case 7:t.bcData=e.sent,t.title=t.bcData.name,t.matchId=t.bcData.custom_fields.matchid,t.getMatchData().then((function(e){t.keyEvents=e})),t.createwebvtt(),t.bcData.sources.length>1?t.options.sources=t.bcData.sources.filter((function(t){return t.src.startsWith("https://")})):t.options.sources=t.bcData.sources,t.initApp();case 14:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){},methods:{onErrorEvent:function(t){this.onError(t.detail)},onError:function(t){console.error("Error code",t.code,"object",t)},initPlayer:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=document.getElementById("video"),r=new u.a(a),window.player=r,n=new d.a.Player(a),t.player=r,n.addEventListener("error",t.onErrorEvent),e.prev=6,console.log(t.options.sources[0].src),e.next=10,n.load(t.options.sources[0].src);case 10:return e.next=12,n.addTextTrack("https://0l60wuyvp6.execute-api.ap-southeast-2.amazonaws.com/ffa/".concat(t.matchId,".webvtt"),"en","chapters","text/vtt");case 12:console.log("The video has now been loaded!"),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](6),t.onError(e.t0);case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))()},initApp:function(){d.a.polyfill.installAll(),d.a.Player.isBrowserSupported()?this.initPlayer():console.error("Browser not supported!")},calibrate:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.calbrateData=[],a=regeneratorRuntime.mark((function e(a){var r,o,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=300*a,t.player.currentTime=n,t.player.pause(),e.next=5,t.readText();case 5:r=e.sent,o=/^[\d+]*:[\d+]*$/gm,i=r.TextDetections.filter((function(t){return o.test(t.DetectedText)})),c=i[0]&&60*Number(i[0].DetectedText.split(":")[0])+Number(i[0].DetectedText.split(":")[1]),s=void 0,c<2700?s="FirstHalf":c>2700&&c<5400?s="SecondHalf":c>5400&&c<6300?s="ExtraFirstHalf":c>6300&&c<7200&&(s="ExtraSecondHalf"),i[0]&&t.calbrateData.push({time:r.time,matchtime:c,offset:r.time-c,half:s});case 12:case"end":return e.stop()}}),e)})),r=1;case 3:if(!(r<Math.ceil(t.player.duration/300))){e.next=8;break}return e.delegateYield(a(r),"t0",5);case 5:r++,e.next=3;break;case 8:return o={},o.FirstHalf=Math.abs(t.calbrateData.filter((function(t){if("FirstHalf"==t.half)return t}))[0].offset),o.SecondHalf=Math.abs(t.calbrateData.filter((function(t){if("SecondHalf"==t.half)return t}))[0].offset),t.calbrateData.filter((function(t){if("ExtraFirstHalf"==t.half)return t})).length>0&&(o.ExtraFirstHalf=Math.abs(t.calbrateData.filter((function(t){if("ExtraFirstHalf"==t.half)return t}))[0].offset),t.calbrateData.filter((function(t){if("ExtraSecondHalf"==t.half)return t})).length>0&&(o.ExtraSecondHalf=Math.abs(t.calbrateData.filter((function(t){if("ExtraSecondHalf"==t.half)return t}))[0].offset))),t.matchOffsetData=o,e.next=15,t.getMatchData();case 15:t.keyEvents=e.sent,console.log(o);case 17:case"end":return e.stop()}}),e)})))()},onTimeUpdate:function(){this.currentTime=this.player.currentTime,this.captureVideo()},captureVideo:function(){var t=this;return new Promise((function(e,a){var r=t.canvas.height/t.video.videoHeight*t.video.videoWidth;e(t.ctx.drawImage(t.video,0,0,r,t.canvas.height)),t.canvas.onerror=a}))},readText:function(){var t=new Headers;t.append("Content-Type","application/json");var e=JSON.stringify({image:this.canvas.toDataURL("img/png").split("data:image/png;base64,")[1],time:this.currentTime}),a={method:"POST",headers:t,body:e,redirect:"follow"};return new Promise((function(t,e){fetch("https://byfset8uye.execute-api.ap-southeast-2.amazonaws.com/default/FFAScoreReader",a).then((function(t){return t.json()})).then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},onLoadedMetadata:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log("player loaded Data!",t),e.canvas.width=640,e.canvas.height=360;case 3:case"end":return a.stop()}}),a)})))()},createwebvtt:function(){var t=this;this.getWebvtt().then((function(e){t.webvtt=e}))},convertSecondstoTime:function(t){var e=Math.floor(t/3600),a=Math.floor((t-3600*e)/60),r=t-3600*e-60*a,n=e.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+".000";return n},extractMatchInfo:function(){},getWebvtt:function(){var t=this;return new Promise((function(e,a){var r={method:"GET",redirect:"follow"};fetch("https://0l60wuyvp6.execute-api.ap-southeast-2.amazonaws.com/ffa/m".concat(t.matchId,".webvtt"),r).then((function(t){return t.text()})).then((function(t){return e(t)})).catch((function(t){return a(t)}))}))},getMatchData:function(){var t=this;return new Promise((function(e,a){var r={method:"GET",redirect:"follow"};fetch("https://0l60wuyvp6.execute-api.ap-southeast-2.amazonaws.com/ffa/m".concat(t.matchId,".json"),r).then((function(t){return t.json()})).then((function(t){return e(t)})).catch((function(t){return a(t)}))}))},getBC:function(t){return new Promise((function(e,a){var r=new Headers;r.append("Accept","application/json;pk=BCpkADawqM2QQRAICfpf23j4hDi7g-UlKZp6rNqo3jReJFEfkuhnjOfjJTUOryo27EoXjggPUBbgzBpPvNY7p-YM4Me1Sx3Khpn-FkMQqP5x66s_ULssIqU3V6C2s7odORMP7L_iAyuGwexk");var n={method:"GET",headers:r,redirect:"follow"};fetch("https://edge.api.brightcove.com/playback/v1/accounts/6058022062001/videos/".concat(t),n).then((function(t){return t.json()})).then((function(t){return e(t)})).catch((function(t){return a(t)}))}))}}},m=v,b=(a("0a90"),a("2877")),x=Object(b["a"])(m,i,c,!1,null,"5090889a",null),y=x.exports,w={name:"App",components:{Main:y}},g=w,_=Object(b["a"])(g,n,o,!1,null,null,null),C=_.exports;a("def6"),a("fda2");r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(C)}}).$mount("#app")},def6:function(t,e,a){},e9c9:function(t,e,a){}});
//# sourceMappingURL=app.6f3f167c.js.map